* Z:\trinary\code\circuits\full_adder_test.asc
XX1 $G_Vdd $G_Vss tpower
VA X 0 PWL(0 -5 50E-9 -5 60E-9 -5 110E-9 -5 120E-9 -5 170E-9 -5 180E-9 0 230E-9 0 240E-9 0 290E-9 0 300E-9 0 350E-9 0 360E-9 5 410E-9 5 420E-9 5 470E-9 5 480E-9 5 530E-9 5 550E-9 -5 600E-9 -5 610E-9 -5 660E-9 -5 670E-9 -5 720E-9 -5 730E-9 0 780E-9 0 790E-9 0 840E-9 0 850E-9 0 900E-9 0 910E-9 5 960E-9 5 970E-9 5 1020E-9 5 1030E-9 5 1080E-9 5 1100E-9 -5 1150E-9 -5 1160E-9 -5 1210E-9 -5 1220E-9 -5 1270E-9 -5 1280E-9 0 1330E-9 0 1340E-9 0 1390E-9 0 1400E-9 0 1450E-9 0 1460E-9 5 1510E-9 5 1520E-9 5 1570E-9 5 1580E-9 5 1630E-9 5)
VB Y 0 PWL(0 -5 50E-9 -5 60E-9 0 110E-9 0 120E-9 5 170E-9 5 180E-9 -5 230E-9 -5 240E-9 0 290E-9 0 300E-9 5 350E-9 5 360E-9 -5 410E-9 -5 420E-9 0 470E-9 0 480E-9 5 530E-9 5 550E-9 -5 600E-9 -5 610E-9 0 660E-9 0 670E-9 5 720E-9 5 730E-9 -5 780E-9 -5 790E-9 0 840E-9 0 850E-9 5 900E-9 5 910E-9 -5 960E-9 -5 970E-9 0 1020E-9 0 1030E-9 5 1080E-9 5 1100E-9 -5 1150E-9 -5 1160E-9 0 1210E-9 0 1220E-9 5 1270E-9 5 1280E-9 -5 1330E-9 -5 1340E-9 0 1390E-9 0 1400E-9 5 1450E-9 5 1460E-9 -5 1510E-9 -5 1520E-9 0 1570E-9 0 1580E-9 5 1630E-9 5)
XFA X CO S Y CI full_adder
VCI CI 0 PWL(0 -5 549n -5 550n 0 1099n 0 1100n 5)

* block symbol definitions
.subckt tpower Vdd Vss
Vdd Vdd 0 5V
Vss 0 Vss 5V
.ends tpower

.subckt full_adder X CO S Y CI
XXdecodeX X CTRL_XC CTRL_XB CTRL_XA decoder1-3
XXtgA1 $G_Vss A1 CTRL_XA tg
XXtgC1 0 A1 CTRL_XC tg
XXtgB1 $G_Vdd A1 CTRL_XB tg
XXtgA2 0 A2 CTRL_XA tg
XXtgC2 $G_Vdd A2 CTRL_XC tg
XXtgB2 $G_Vss A2 CTRL_XB tg
XXtgA3 0 A3 CTRL_XA tg
XXtgC3 $G_Vss A3 CTRL_XC tg
XXtgB3 $G_Vss A3 CTRL_XB tg
XXtgA4 0 A4 CTRL_XA tg
XXtgC4 $G_Vss A4 CTRL_XC tg
XXtgB4 0 A4 CTRL_XB tg
XXtgA5 $G_Vdd A5 CTRL_XA tg
XXtgC5 0 A5 CTRL_XC tg
XXtgB5 0 A5 CTRL_XB tg
XXtgA6 $G_Vdd A6 CTRL_XA tg
XXtgC6 0 A6 CTRL_XC tg
XXtgB6 $G_Vdd A6 CTRL_XB tg
XXtgA7 X CTRL_SA CTRL_YA tg
XXtgC7 A1 CTRL_SA CTRL_YC tg
XXtgB7 A2 CTRL_SA CTRL_YB tg
XXtgA8 A1 CTRL_SB CTRL_YA tg
XXtgC8 A2 CTRL_SB CTRL_YC tg
XXtgB8 X CTRL_SB CTRL_YB tg
XXtgA9 A2 CTRL_SC CTRL_YA tg
XXtgC9 X CTRL_SC CTRL_YC tg
XXtgB9 A1 CTRL_SC CTRL_YB tg
XXtgA10 0 CTRL_C0A CTRL_YA tg
XXtgC10 A3 CTRL_C0A CTRL_YC tg
XXtgB10 A4 CTRL_C0A CTRL_YB tg
XXtgA11 A5 CTRL_C0B CTRL_YA tg
XXtgC11 A4 CTRL_C0B CTRL_YC tg
XXtgB11 0 CTRL_C0B CTRL_YB tg
XXtgA12 A6 CTRL_C0C CTRL_YA tg
XXtgC12 0 CTRL_C0C CTRL_YC tg
XXtgB12 A5 CTRL_C0C CTRL_YB tg
XXdecodeY Y CTRL_YC CTRL_YB CTRL_YA decoder1-3
XXtgA15 CTRL_SA S CTRL_CA tg
XXtgC15 CTRL_SC S CTRL_CC tg
XXtgB15 CTRL_SB S CTRL_CB tg
XXtgA18 CTRL_C0A CO CTRL_CA tg
XXtgC18 CTRL_C0C CO CTRL_CC tg
XXtgB18 CTRL_C0B CO CTRL_CB tg
XX1 CI CTRL_CA CTRL_CB CTRL_CC decoder1-3
.ends full_adder

.subckt decoder1-3 IN OUT_i OUT_0 OUT_1
XX1pti IN IN_pti pti
XX1sti IN_pti OUT_1 sti
XXinti IN OUT_i nti
XX0nor OUT_1 OUT_i OUT_0 tnor
.ends decoder1-3

.subckt tg IN_OUT OUT_IN CONTROL
M1 OUT_IN _C IN_OUT $G_Vdd CD4007P
M2 IN_OUT C OUT_IN $G_Vss CD4007N
M3 $G_Vdd CONTROL _C $G_Vdd CD4007P
M4 _C CONTROL $G_Vss $G_Vss CD4007N
M5 $G_Vdd _C C $G_Vdd CD4007P
M6 C _C $G_Vss $G_Vss CD4007N
.ends tg

.subckt pti IN OUT
Xinv IN OUT NC_01 NC_02 tinv
.ends pti

.subckt sti IN OUT
XXinv IN NC_01 OUT NC_02 tinv
.ends sti

.subckt nti IN OUT
Xinv IN NC_01 NC_02 OUT tinv
.ends nti

.subckt tnor A B TNOR_Out
RP NP TNOR_Out 12k
RN TNOR_Out NN 12k
MN1 NN A $G_Vss $G_Vss CD4007N
MP2 NI A $G_Vdd $G_Vdd CD4007P
MN2 NN B $G_Vss $G_Vss CD4007N
MP1 NI B NP $G_Vdd CD4007P
.ends tnor

.subckt tinv Vin PTI_Out STI_Out NTI_Out
RP PTI_Out STI_Out 12k
RN STI_Out NTI_Out 12k
MN NTI_Out Vin $G_Vss $G_Vss CD4007N
MP PTI_Out Vin $G_Vdd $G_Vdd CD4007P
.ends tinv

.model NMOS NMOS
.model PMOS PMOS
.lib C:\PROGRA~1\LTC\SwCADIII\lib\cmp\standard.mos
.tran 1650n
* Note: VA and VB are PWL's that cycle through i,0,1;\nat different frequencies. Not on schematic due to length.
.backanno
.end
